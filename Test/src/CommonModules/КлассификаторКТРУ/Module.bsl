#Область ПрограммныйИнтерфейс

// Устанавливает объектную блокировку.
// Вызывает исключение, если объект уже заблокирован.
//
// Параметры:
//  Объект   - любой объект ссылочного типа информационной базы.
//  Включить - Булево - определяет, будет ли включена объектная блокировка.
//
Процедура ЗаблокироватьОбъект(Объект) Экспорт
	
	Попытка
		Объект.Заблокировать();
	Исключение
		
		Текст = НСтр("ru = 'Не удалось заблокировать данные объекта ""%1"".
			|Возможно, объект редактируется другим пользователем.'");
		Текст = СтроковыеФункцииКлиентСервер.ПодставитьПараметрыВСтроку(Текст, Объект.Ссылка);
		ВызватьИсключение Текст;
		
	КонецПопытки;
	
КонецПроцедуры

// Найти создать единицу измерения для КТРУ.
// 
// Параметры:
//  КодЕдиницыИзмерения - Строка - Код единицы измерения
//  НаименованиеЕдиницыИзмерения - Строка - Наименование единицы измерения
// Возвращаемое значение:
//  СправочникСсылка.ЕдиницыИзмерения - единица измерения.
Функция НайтиСоздатьЕдиницуИзмеренияКТРУ(КодЕдиницыИзмерения, НаименованиеЕдиницыИзмерения = "") Экспорт
	
	ЕдиницаИзмерения = Неопределено;
	КлассификаторКТРУПереопределяемый.НайтиСоздатьЕдиницуИзмеренияКТРУ(
		КодЕдиницыИзмерения, НаименованиеЕдиницыИзмерения, ЕдиницаИзмерения);
	
	Возврат ЕдиницаИзмерения;
	
КонецФункции

#Область ЗагрузкаКлассификаторов

// Возвращает признак необходимости полной загрузки классификатора.
//
// Возвращаемое значение:
//  ЗагружатьПолностью - Булево.
//
Функция ЗагружатьКлассификаторПолностью() Экспорт
	
	Если Не ОбщегоНазначения.ПодсистемаСуществует("ИнтернетПоддержкаПользователей.РаботаСКлассификаторами") Тогда
		Возврат Ложь;
	КонецЕсли;
	
	Если Справочники.КТРУ.НеразделенныйКлассификатор() Тогда
		Возврат Истина;
	КонецЕсли;
	
	ЗагружатьПолностью = Ложь;
	КлассификаторКТРУПереопределяемый.ЗагружатьКлассификаторПолностью(ЗагружатьПолностью);
	
	Возврат ЗагружатьПолностью;
	
КонецФункции

#КонецОбласти

#Область ДляВызоваИзДругихПодсистем

// ИнтернетПоддержкаПользователей.РаботаСКлассификаторами

// См. РаботаСКлассификаторамиПереопределяемый.ПриДобавленииКлассификаторов.
Процедура ПриДобавленииКлассификаторов(Классификаторы) Экспорт
	
	Если Не ОбщегоНазначения.ПодсистемаСуществует("ИнтернетПоддержкаПользователей.РаботаСКлассификаторами") Тогда
		Возврат;
	КонецЕсли;
	
	Справочники.КТРУ.ПриДобавленииКлассификаторов(Классификаторы);
	
КонецПроцедуры

// См. РаботаСКлассификаторамиПереопределяемый.ПриЗагрузкеКлассификатора.
Процедура ПриЗагрузкеКлассификатора(Идентификатор, Версия, Адрес, Обработан, ДополнительныеПараметры) Экспорт
	
	Если Не ОбщегоНазначения.ПодсистемаСуществует("ИнтернетПоддержкаПользователей.РаботаСКлассификаторами") Тогда
		Возврат;
	КонецЕсли;
	
	Справочники.КТРУ.ПриЗагрузкеКлассификатора(Идентификатор, Версия, Адрес, Обработан);
	
КонецПроцедуры

// Конец ИнтернетПоддержкаПользователей.РаботаСКлассификаторами

#КонецОбласти

#КонецОбласти