<?xml version="1.0" encoding="UTF-8"?>
<DataCompositionSchema xmlns="http://v8.1c.ru/8.1/data-composition-system/schema" xmlns:dcscom="http://v8.1c.ru/8.1/data-composition-system/common" xmlns:dcscor="http://v8.1c.ru/8.1/data-composition-system/core" xmlns:dcsset="http://v8.1c.ru/8.1/data-composition-system/settings" xmlns:v8="http://v8.1c.ru/8.1/data/core" xmlns:v8ui="http://v8.1c.ru/8.1/data/ui" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<dataSource>
		<name>ИсточникДанных1</name>
		<dataSourceType>Local</dataSourceType>
	</dataSource>
	<dataSet xsi:type="DataSetQuery">
		<name>СтатистикаЧековККМ</name>
		<field xsi:type="DataSetFieldField">
			<dataPath>КассаККМ</dataPath>
			<field>КассаККМ</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Касса</v8:content>
				</v8:item>
			</title>
			<valueType>
				<v8:Type xmlns:d5p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d5p1:CatalogRef.КассыККМ</v8:Type>
			</valueType>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КоличествоЧеков_ПродажаВсего</dataPath>
			<field>КоличествоЧеков_ПродажаВсего</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Продажа всего (кол-во чеков)</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<group>true</group>
			</useRestriction>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>ЧДЦ=2</v8:content>
						</v8:item>
					</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>МаксимальнаяШирина</dcscor:parameter>
					<dcscor:value xsi:type="xs:decimal">15</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КоличествоЧеков_Продажа</dataPath>
			<field>КоличествоЧеков_Продажа</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Продажа (кол-во чеков)</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<group>true</group>
			</useRestriction>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>ЧДЦ=2</v8:content>
						</v8:item>
					</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>МаксимальнаяШирина</dcscor:parameter>
					<dcscor:value xsi:type="xs:decimal">15</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КоличествоЧеков_ПродажаСоСкидкой</dataPath>
			<field>КоличествоЧеков_ПродажаСоСкидкой</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Продажа со скидкой (кол-во чеков)</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<group>true</group>
			</useRestriction>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>ЧДЦ=2</v8:content>
						</v8:item>
					</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>МаксимальнаяШирина</dcscor:parameter>
					<dcscor:value xsi:type="xs:decimal">15</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КоличествоЧеков_Возврат</dataPath>
			<field>КоличествоЧеков_Возврат</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Возврат (кол-во чеков)</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<group>true</group>
			</useRestriction>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>ЧДЦ=2</v8:content>
						</v8:item>
					</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>МаксимальнаяШирина</dcscor:parameter>
					<dcscor:value xsi:type="xs:decimal">15</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПродажаОплата_СуммаВозврат</dataPath>
			<field>ПродажаОплата_СуммаВозврат</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Сумма возврата</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<group>true</group>
			</useRestriction>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>ЧДЦ=2</v8:content>
						</v8:item>
					</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>МаксимальнаяШирина</dcscor:parameter>
					<dcscor:value xsi:type="xs:decimal">15</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПродажаОплата_СуммаПродажаСоСкидкой</dataPath>
			<field>ПродажаОплата_СуммаПродажаСоСкидкой</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Сумма продажи со скидкой</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<group>true</group>
			</useRestriction>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>ЧДЦ=2</v8:content>
						</v8:item>
					</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>МаксимальнаяШирина</dcscor:parameter>
					<dcscor:value xsi:type="xs:decimal">15</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПродажаОплата_СуммаПродажаВсего</dataPath>
			<field>ПродажаОплата_СуммаПродажаВсего</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Сумма продажи всего</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<group>true</group>
			</useRestriction>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>ЧДЦ=2</v8:content>
						</v8:item>
					</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>МаксимальнаяШирина</dcscor:parameter>
					<dcscor:value xsi:type="xs:decimal">15</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПродажаОплата_СуммаПродажа</dataPath>
			<field>ПродажаОплата_СуммаПродажа</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Сумма продажи</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<group>true</group>
			</useRestriction>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>ЧДЦ=2</v8:content>
						</v8:item>
					</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>МаксимальнаяШирина</dcscor:parameter>
					<dcscor:value xsi:type="xs:decimal">15</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Оплата_БанковскаяКарта</dataPath>
			<field>Оплата_БанковскаяКарта</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Оплата банк. картой</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<group>true</group>
			</useRestriction>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>ЧДЦ=2</v8:content>
						</v8:item>
					</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>МаксимальнаяШирина</dcscor:parameter>
					<dcscor:value xsi:type="xs:decimal">15</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПродажаОплата_НоменклатураПродажаВсего</dataPath>
			<field>ПродажаОплата_НоменклатураПродажаВсего</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Продажа всего (кол-во номенклатура)</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<group>true</group>
			</useRestriction>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>ЧДЦ=3</v8:content>
						</v8:item>
					</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>МаксимальнаяШирина</dcscor:parameter>
					<dcscor:value xsi:type="xs:decimal">15</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПродажаОплата_НоменклатураПродажа</dataPath>
			<field>ПродажаОплата_НоменклатураПродажа</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Продажа (кол-во номенклатура)</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<group>true</group>
			</useRestriction>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>ЧДЦ=3</v8:content>
						</v8:item>
					</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>МаксимальнаяШирина</dcscor:parameter>
					<dcscor:value xsi:type="xs:decimal">15</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПродажаОплата_НоменклатураПродажаСоСкидкой</dataPath>
			<field>ПродажаОплата_НоменклатураПродажаСоСкидкой</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Продажа номенклатуры со скидкой</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<group>true</group>
			</useRestriction>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>ЧДЦ=3</v8:content>
						</v8:item>
					</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>МаксимальнаяШирина</dcscor:parameter>
					<dcscor:value xsi:type="xs:decimal">15</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПродажаОплата_НоменклатураВозврат</dataPath>
			<field>ПродажаОплата_НоменклатураВозврат</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Возврат (кол-во номенклатура)</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<group>true</group>
			</useRestriction>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>ЧДЦ=3</v8:content>
						</v8:item>
					</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>МаксимальнаяШирина</dcscor:parameter>
					<dcscor:value xsi:type="xs:decimal">15</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Оплата_Наличные</dataPath>
			<field>Оплата_Наличные</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Оплата наличными</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<group>true</group>
			</useRestriction>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>ЧДЦ=2</v8:content>
						</v8:item>
					</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>МаксимальнаяШирина</dcscor:parameter>
					<dcscor:value xsi:type="xs:decimal">15</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Оплата_ПодарочныйСертификат</dataPath>
			<field>Оплата_ПодарочныйСертификат</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Оплата подар. сертификатом</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<group>true</group>
			</useRestriction>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>ЧДЦ=2</v8:content>
						</v8:item>
					</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>МаксимальнаяШирина</dcscor:parameter>
					<dcscor:value xsi:type="xs:decimal">15</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Оплата_СБП</dataPath>
			<field>Оплата_СБП</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Оплата СБП</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<group>true</group>
			</useRestriction>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>ЧДЦ=2</v8:content>
						</v8:item>
					</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>МаксимальнаяШирина</dcscor:parameter>
					<dcscor:value xsi:type="xs:decimal">15</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Оплата_БанковскийКредит</dataPath>
			<field>Оплата_БанковскийКредит</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Оплата банк. кредитом</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<group>true</group>
			</useRestriction>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>ЧДЦ=2</v8:content>
						</v8:item>
					</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>МаксимальнаяШирина</dcscor:parameter>
					<dcscor:value xsi:type="xs:decimal">15</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Оплата_НСПК</dataPath>
			<field>Оплата_НСПК</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Оплата НСПК</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<group>true</group>
			</useRestriction>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>ЧДЦ=2</v8:content>
						</v8:item>
					</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>МаксимальнаяШирина</dcscor:parameter>
					<dcscor:value xsi:type="xs:decimal">15</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<dataSource>ИсточникДанных1</dataSource>
		<query>ВЫБРАТЬ
	ЧекККМ.Ссылка КАК Документ
ПОМЕСТИТЬ ЧекиККМ
ИЗ
	Документ.ЧекККМ КАК ЧекККМ
ГДЕ
	ЧекККМ.Статус = ЗНАЧЕНИЕ(Перечисление.СтатусыЧековККМ.Пробит)
	И ЧекККМ.Проведен
	И ЧекККМ.Дата &gt;= &amp;НачалоПериода
	И (ЧекККМ.Дата &lt;= &amp;КонецПериода
			ИЛИ &amp;КонецПериода = ДАТАВРЕМЯ(1, 1, 1, 0, 0, 0))
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ЧекККМВозврат.Ссылка КАК Документ
ПОМЕСТИТЬ ЧекиККМВозврат
ИЗ
	Документ.ЧекККМВозврат КАК ЧекККМВозврат
ГДЕ
	ЧекККМВозврат.Проведен
	И ЧекККМВозврат.Дата &gt;= &amp;НачалоПериода
	И (ЧекККМВозврат.Дата &lt;= &amp;КонецПериода
			ИЛИ &amp;КонецПериода = ДАТАВРЕМЯ(1, 1, 1, 0, 0, 0))
	И ЧекККМВозврат.НомерЧекаККМ &gt; 0
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВложенныйЗапрос.Документ КАК Документ,
	СУММА(ВложенныйЗапрос.СуммаДокумента) КАК СуммаДокумента,
	СУММА(ВложенныйЗапрос.СуммаПредоплаты) КАК СуммаПредоплаты,
	СУММА(ВложенныйЗапрос.ОплатаБанковскаяКарта) КАК ОплатаБанковскаяКарта,
	СУММА(ВложенныйЗапрос.ОплатаПодарочныйСертификат) КАК ОплатаПодарочныйСертификат,
	СУММА(ВложенныйЗапрос.ОплатаБанковскийКредит) КАК ОплатаБанковскийКредит,
	СУММА(ВложенныйЗапрос.ОплатаСБП) КАК ОплатаСБП,
	СУММА(ВложенныйЗапрос.ОплатаНСПК) КАК ОплатаНСПК,
	СУММА(ВложенныйЗапрос.ВозвратНаличные) КАК ВозвратНаличные,
	СУММА(ВложенныйЗапрос.ВозвратБанковскаяКарта) КАК ВозвратБанковскаяКарта,
	СУММА(ВложенныйЗапрос.ВозвратПодарочныйСертификат) КАК ВозвратПодарочныйСертификат,
	СУММА(ВложенныйЗапрос.ВозвратБанковскийКредит) КАК ВозвратБанковскийКредит,
	СУММА(ВложенныйЗапрос.ВозвратСБП) КАК ВозвратСБП,
	СУММА(ВложенныйЗапрос.ВозвратНСПК) КАК ВозвратНСПК,
	СУММА(ВЫБОР
			КОГДА ВложенныйЗапрос.ПроцентСкидки &gt; 0
				ТОГДА ВложенныйЗапрос.КоличествоНоменклатурыПродажа
			ИНАЧЕ 0
		КОНЕЦ) КАК КолПродажаНоменклатураСоСкидкой,
	СУММА(ВЫБОР
			КОГДА ВложенныйЗапрос.ПроцентСкидки = 0
				ТОГДА ВложенныйЗапрос.КоличествоНоменклатурыПродажа
			ИНАЧЕ 0
		КОНЕЦ) КАК КолПродажаНоменклатураБезСкидки,
	СУММА(ВложенныйЗапрос.КоличествоНоменклатурыВозврат) КАК КолВозвратНоменклатура,
	СУММА(ВложенныйЗапрос.СуммаПродажаВсего) КАК СуммаПродажаВсего,
	СУММА(ВЫБОР
			КОГДА ВложенныйЗапрос.ПроцентСкидки &gt; 0
				ТОГДА ВложенныйЗапрос.СуммаПродажаВсего
			ИНАЧЕ 0
		КОНЕЦ) КАК СуммаПродажаСоСкидкой,
	СУММА(ВЫБОР
			КОГДА ВложенныйЗапрос.ПроцентСкидки = 0
				ТОГДА ВложенныйЗапрос.СуммаПродажаВсего
			ИНАЧЕ 0
		КОНЕЦ) КАК СуммаПродажаБезСкидки,
	СУММА(ВложенныйЗапрос.СуммаВозвратВсего) КАК СуммаВозвратВсего
ПОМЕСТИТЬ ПродажаОплата
ИЗ
	(ВЫБРАТЬ
		ЧекиККМ.Документ КАК Документ,
		ЧекиККМ.Документ.СуммаДокумента КАК СуммаДокумента,
		0 КАК ОплатаБанковскаяКарта,
		0 КАК ОплатаПодарочныйСертификат,
		0 КАК ОплатаБанковскийКредит,
		0 КАК ОплатаСБП,
		0 КАК ОплатаНСПК,
		0 КАК ВозвратНаличные,
		0 КАК ВозвратБанковскаяКарта,
		0 КАК ВозвратПодарочныйСертификат,
		0 КАК ВозвратБанковскийКредит,
		0 КАК ВозвратСБП,
		0 КАК ВозвратНСПК,
		0 КАК ПроцентСкидки,
		0 КАК СуммаПродажаВсего,
		0 КАК КоличествоНоменклатурыПродажа,
		0 КАК СуммаВозвратВсего,
		0 КАК КоличествоНоменклатурыВозврат,
		0 КАК СуммаПредоплаты
	ИЗ
		ЧекиККМ КАК ЧекиККМ
	{ГДЕ
		ЧекиККМ.Документ.КассаККМ.* КАК КассаККМ}
	
	ОБЪЕДИНИТЬ ВСЕ
	
	ВЫБРАТЬ
		ЧекККМБезналичнаяОплата.Ссылка,
		0,
		ВЫБОР
			КОГДА ЧекККМБезналичнаяОплата.ВидОплаты = ЗНАЧЕНИЕ(Перечисление.ВидыБезналичныхОплат.БанковскаяКарта)
				ТОГДА ЧекККМБезналичнаяОплата.Сумма
			ИНАЧЕ 0
		КОНЕЦ,
		ВЫБОР
			КОГДА ЧекККМБезналичнаяОплата.ВидОплаты = ЗНАЧЕНИЕ(Перечисление.ВидыБезналичныхОплат.ПодарочныйСертификат)
				ТОГДА ЧекККМБезналичнаяОплата.Сумма
			ИНАЧЕ 0
		КОНЕЦ,
		ВЫБОР
			КОГДА ЧекККМБезналичнаяОплата.ВидОплаты = ЗНАЧЕНИЕ(Перечисление.ВидыБезналичныхОплат.Кредит)
				ТОГДА ЧекККМБезналичнаяОплата.Сумма
			ИНАЧЕ 0
		КОНЕЦ,
		ВЫБОР
			КОГДА ЧекККМБезналичнаяОплата.ВидОплаты = ЗНАЧЕНИЕ(Перечисление.ВидыБезналичныхОплат.СБП)
				ТОГДА ЧекККМБезналичнаяОплата.Сумма
			ИНАЧЕ 0
		КОНЕЦ,
		ВЫБОР
			КОГДА ЧекККМБезналичнаяОплата.ВидОплаты = ЗНАЧЕНИЕ(Перечисление.ВидыБезналичныхОплат.СертификатНСПК)
				ТОГДА ЧекККМБезналичнаяОплата.Сумма
			ИНАЧЕ 0
		КОНЕЦ,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		0
	ИЗ
		ЧекиККМ КАК ЧекиККМ
			ВНУТРЕННЕЕ СОЕДИНЕНИЕ Документ.ЧекККМ.БезналичнаяОплата КАК ЧекККМБезналичнаяОплата
			ПО ЧекиККМ.Документ = ЧекККМБезналичнаяОплата.Ссылка
	{ГДЕ
		ЧекиККМ.Документ.КассаККМ.* КАК КассаККМ}
	
	ОБЪЕДИНИТЬ ВСЕ
	
	ВЫБРАТЬ
		ЧекиККМВозврат.Документ,
		0,
		0,
		0,
		0,
		0,
		0,
		ЧекиККМВозврат.Документ.ПолученоНаличными,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		0
	ИЗ
		ЧекиККМВозврат КАК ЧекиККМВозврат
	{ГДЕ
		ЧекиККМВозврат.Документ.КассаККМ.* КАК КассаККМ}
	
	ОБЪЕДИНИТЬ ВСЕ
	
	ВЫБРАТЬ
		ЧекККМВозвратБезналичнаяОплата.Ссылка,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		ВЫБОР
			КОГДА ЧекККМВозвратБезналичнаяОплата.ВидОплаты = ЗНАЧЕНИЕ(Перечисление.ВидыБезналичныхОплат.БанковскаяКарта)
				ТОГДА ЧекККМВозвратБезналичнаяОплата.Сумма
			ИНАЧЕ 0
		КОНЕЦ,
		ВЫБОР
			КОГДА ЧекККМВозвратБезналичнаяОплата.ВидОплаты = ЗНАЧЕНИЕ(Перечисление.ВидыБезналичныхОплат.ПодарочныйСертификат)
				ТОГДА ЧекККМВозвратБезналичнаяОплата.Сумма
			ИНАЧЕ 0
		КОНЕЦ,
		ВЫБОР
			КОГДА ЧекККМВозвратБезналичнаяОплата.ВидОплаты = ЗНАЧЕНИЕ(Перечисление.ВидыБезналичныхОплат.Кредит)
				ТОГДА ЧекККМВозвратБезналичнаяОплата.Сумма
			ИНАЧЕ 0
		КОНЕЦ,
		ВЫБОР
			КОГДА ЧекККМВозвратБезналичнаяОплата.ВидОплаты = ЗНАЧЕНИЕ(Перечисление.ВидыБезналичныхОплат.СБП)
				ТОГДА ЧекККМВозвратБезналичнаяОплата.Сумма
			ИНАЧЕ 0
		КОНЕЦ,
		ВЫБОР
			КОГДА ЧекККМВозвратБезналичнаяОплата.ВидОплаты = ЗНАЧЕНИЕ(Перечисление.ВидыБезналичныхОплат.СертификатНСПК)
				ТОГДА ЧекККМВозвратБезналичнаяОплата.Сумма
			ИНАЧЕ 0
		КОНЕЦ,
		0,
		0,
		0,
		0,
		0,
		0
	ИЗ
		ЧекиККМВозврат КАК ЧекиККМВозврат
			ВНУТРЕННЕЕ СОЕДИНЕНИЕ Документ.ЧекККМВозврат.БезналичнаяОплата КАК ЧекККМВозвратБезналичнаяОплата
			ПО ЧекиККМВозврат.Документ = ЧекККМВозвратБезналичнаяОплата.Ссылка
	{ГДЕ
		ЧекиККМВозврат.Документ.КассаККМ.* КАК КассаККМ}
	
	ОБЪЕДИНИТЬ ВСЕ
	
	ВЫБРАТЬ
		ВложенныйЗапрос.Документ,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		СУММА(ВложенныйЗапрос.ПроцентСкидки),
		СУММА(ВложенныйЗапрос.СуммаПродажаВсего),
		КОЛИЧЕСТВО(*),
		0,
		0,
		0
	ИЗ
		(ВЫБРАТЬ
			ЧекиККМ.Документ КАК Документ,
			ЧекККМЗапасы.Номенклатура КАК Номенклатура,
			ЧекККМЗапасы.Характеристика КАК Характеристика,
			СУММА(ЧекККМЗапасы.Всего) КАК СуммаПродажаВсего,
			СУММА(ВЫБОР
					КОГДА (ВЫРАЗИТЬ(ЧекККМЗапасы.Цена * ЧекККМЗапасы.Количество КАК ЧИСЛО(15, 2))) = ЧекККМЗапасы.Всего
							ИЛИ ЧекККМЗапасы.Цена * ЧекККМЗапасы.Количество = 0
						ТОГДА 0
					ИНАЧЕ 100 * (ЧекККМЗапасы.Цена * ЧекККМЗапасы.Количество - ЧекККМЗапасы.Всего) / (ЧекККМЗапасы.Цена * ЧекККМЗапасы.Количество)
				КОНЕЦ) КАК ПроцентСкидки
		ИЗ
			ЧекиККМ КАК ЧекиККМ
				ВНУТРЕННЕЕ СОЕДИНЕНИЕ Документ.ЧекККМ.Запасы КАК ЧекККМЗапасы
				ПО ЧекиККМ.Документ = ЧекККМЗапасы.Ссылка
		
		СГРУППИРОВАТЬ ПО
			ЧекиККМ.Документ,
			ЧекККМЗапасы.Номенклатура,
			ЧекККМЗапасы.Характеристика) КАК ВложенныйЗапрос
	
	СГРУППИРОВАТЬ ПО
		ВложенныйЗапрос.Документ
	
	ОБЪЕДИНИТЬ ВСЕ
	
	ВЫБРАТЬ
		ВложенныйЗапрос.Документ,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		СУММА(ВложенныйЗапрос.СуммаПродажаВсего),
		КОЛИЧЕСТВО(*),
		0
	ИЗ
		(ВЫБРАТЬ
			ЧекиККМВозврат.Документ КАК Документ,
			ЧекККМВозвратЗапасы.Номенклатура КАК Номенклатура,
			ЧекККМВозвратЗапасы.Характеристика КАК Характеристика,
			СУММА(ЧекККМВозвратЗапасы.Всего) КАК СуммаПродажаВсего
		ИЗ
			ЧекиККМВозврат КАК ЧекиККМВозврат
				ВНУТРЕННЕЕ СОЕДИНЕНИЕ Документ.ЧекККМВозврат.Запасы КАК ЧекККМВозвратЗапасы
				ПО ЧекиККМВозврат.Документ = ЧекККМВозвратЗапасы.Ссылка
		
		СГРУППИРОВАТЬ ПО
			ЧекиККМВозврат.Документ,
			ЧекККМВозвратЗапасы.Номенклатура,
			ЧекККМВозвратЗапасы.Характеристика) КАК ВложенныйЗапрос
	
	СГРУППИРОВАТЬ ПО
		ВложенныйЗапрос.Документ
	
	ОБЪЕДИНИТЬ ВСЕ
	
	ВЫБРАТЬ
		ЧекККМПредоплата.Ссылка,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		ЧекККМПредоплата.СуммаРасчетов
	ИЗ
		ЧекиККМ КАК ЧекиККМ
			ВНУТРЕННЕЕ СОЕДИНЕНИЕ Документ.ЧекККМ.Предоплата КАК ЧекККМПредоплата
			ПО ЧекиККМ.Документ = ЧекККМПредоплата.Ссылка
	{ГДЕ
		ЧекиККМ.Документ.КассаККМ.* КАК КассаККМ}) КАК ВложенныйЗапрос

СГРУППИРОВАТЬ ПО
	ВложенныйЗапрос.Документ
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ЕСТЬNULL(ЧекиККМ.Документ.КассаККМ, ЧекиККМВозврат.Документ.КассаККМ) КАК КассаККМ,
	СУММА(ПродажаОплата.СуммаДокумента - ПродажаОплата.ОплатаБанковскаяКарта - ПродажаОплата.ОплатаПодарочныйСертификат - ПродажаОплата.ОплатаБанковскийКредит - ПродажаОплата.ОплатаСБП - ПродажаОплата.ОплатаНСПК - ПродажаОплата.СуммаПредоплаты) КАК ОплатаНаличные,
	СУММА(ПродажаОплата.ОплатаБанковскаяКарта) КАК ОплатаБанковскаяКарта,
	СУММА(ПродажаОплата.ОплатаПодарочныйСертификат) КАК ОплатаПодарочныйСертификат,
	СУММА(ПродажаОплата.ОплатаБанковскийКредит) КАК ОплатаБанковскийКредит,
	СУММА(ПродажаОплата.ОплатаСБП) КАК ОплатаСБП,
	СУММА(ПродажаОплата.ОплатаНСПК) КАК ОплатаНСПК,
	СУММА(ПродажаОплата.ВозвратНаличные) КАК ВозвратНаличные,
	СУММА(ПродажаОплата.ВозвратБанковскаяКарта) КАК ВозвратБанковскаяКарта,
	СУММА(ПродажаОплата.ВозвратПодарочныйСертификат) КАК ВозвратПодарочныйСертификат,
	СУММА(ПродажаОплата.ВозвратБанковскийКредит) КАК ВозвратБанковскийКредит,
	СУММА(ПродажаОплата.ВозвратСБП) КАК ВозвратСБП,
	СУММА(ПродажаОплата.ВозвратНСПК) КАК ВозвратНСПК,
	СУММА(ПродажаОплата.КолПродажаНоменклатураСоСкидкой) КАК КолПродажаНоменклатураСоСкидкой,
	СУММА(ПродажаОплата.КолПродажаНоменклатураБезСкидки) КАК КолПродажаНоменклатураБезСкидки,
	СУММА(ПродажаОплата.КолВозвратНоменклатура) КАК КолВозвратНоменклатура,
	СУММА(ПродажаОплата.СуммаПродажаВсего) КАК СуммаПродажаВсего,
	СУММА(ПродажаОплата.СуммаПродажаСоСкидкой) КАК СуммаПродажаСоСкидкой,
	СУММА(ПродажаОплата.СуммаПродажаБезСкидки) КАК СуммаПродажаБезСкидки,
	СУММА(ПродажаОплата.СуммаВозвратВсего) КАК СуммаВозвратВсего
ПОМЕСТИТЬ ТаблицаПродажаОплата
ИЗ
	ПродажаОплата КАК ПродажаОплата
		ЛЕВОЕ СОЕДИНЕНИЕ ЧекиККМ КАК ЧекиККМ
		ПО ПродажаОплата.Документ = ЧекиККМ.Документ
		ЛЕВОЕ СОЕДИНЕНИЕ ЧекиККМВозврат КАК ЧекиККМВозврат
		ПО ПродажаОплата.Документ = ЧекиККМВозврат.Документ

СГРУППИРОВАТЬ ПО
	ЕСТЬNULL(ЧекиККМ.Документ.КассаККМ, ЧекиККМВозврат.Документ.КассаККМ)
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ЕСТЬNULL(ЧекиККМ.Документ.КассаККМ, ЧекиККМВозврат.Документ.КассаККМ) КАК КассаККМ,
	ЕСТЬNULL(КОЛИЧЕСТВО(РАЗЛИЧНЫЕ ЧекиККМ.Документ), 0) КАК КоличествоЧеков_ПродажаВсего,
	ЕСТЬNULL(КОЛИЧЕСТВО(РАЗЛИЧНЫЕ ВЫБОР
				КОГДА ПродажаОплата.СуммаПродажаСоСкидкой = 0
					ТОГДА ЧекиККМ.Документ
			КОНЕЦ), 0) КАК КоличествоЧеков_Продажа,
	ЕСТЬNULL(КОЛИЧЕСТВО(РАЗЛИЧНЫЕ ВЫБОР
				КОГДА ПродажаОплата.СуммаПродажаСоСкидкой &lt;&gt; 0
					ТОГДА ЧекиККМ.Документ
			КОНЕЦ), 0) КАК КоличествоЧеков_ПродажаСоСкидкой,
	ЕСТЬNULL(КОЛИЧЕСТВО(РАЗЛИЧНЫЕ ЧекиККМВозврат.Документ), 0) КАК КоличествоЧеков_Возврат,
	ЕСТЬNULL(КОЛИЧЕСТВО(РАЗЛИЧНЫЕ НАЧАЛОПЕРИОДА(ЕСТЬNULL(ЧекиККМ.Документ.Дата, ЧекиККМВозврат.Документ.Дата), ДЕНЬ)), 0) КАК КоличествоДнейРаботыКассы
ПОМЕСТИТЬ КоличествоЧеков
ИЗ
	ПродажаОплата КАК ПродажаОплата
		ЛЕВОЕ СОЕДИНЕНИЕ ЧекиККМ КАК ЧекиККМ
		ПО ПродажаОплата.Документ = ЧекиККМ.Документ
		ЛЕВОЕ СОЕДИНЕНИЕ ЧекиККМВозврат КАК ЧекиККМВозврат
		ПО ПродажаОплата.Документ = ЧекиККМВозврат.Документ

СГРУППИРОВАТЬ ПО
	ЕСТЬNULL(ЧекиККМ.Документ.КассаККМ, ЧекиККМВозврат.Документ.КассаККМ)
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	КоличествоЧеков.КассаККМ КАК КассаККМ,
	ВЫБОР
		КОГДА ЕСТЬNULL(КоличествоЧеков.КоличествоДнейРаботыКассы, 0) = 0
			ТОГДА 0
		ИНАЧЕ ЕСТЬNULL(КоличествоЧеков.КоличествоЧеков_ПродажаВсего, 0) / КоличествоЧеков.КоличествоДнейРаботыКассы
	КОНЕЦ КАК КоличествоЧеков_ПродажаВсего,
	ВЫБОР
		КОГДА ЕСТЬNULL(КоличествоЧеков.КоличествоДнейРаботыКассы, 0) = 0
			ТОГДА 0
		ИНАЧЕ ЕСТЬNULL(КоличествоЧеков.КоличествоЧеков_Продажа, 0) / КоличествоЧеков.КоличествоДнейРаботыКассы
	КОНЕЦ КАК КоличествоЧеков_Продажа,
	ВЫБОР
		КОГДА ЕСТЬNULL(КоличествоЧеков.КоличествоДнейРаботыКассы, 0) = 0
			ТОГДА 0
		ИНАЧЕ ЕСТЬNULL(КоличествоЧеков.КоличествоЧеков_ПродажаСоСкидкой, 0) / КоличествоЧеков.КоличествоДнейРаботыКассы
	КОНЕЦ КАК КоличествоЧеков_ПродажаСоСкидкой,
	ВЫБОР
		КОГДА ЕСТЬNULL(КоличествоЧеков.КоличествоДнейРаботыКассы, 0) = 0
			ТОГДА 0
		ИНАЧЕ ЕСТЬNULL(КоличествоЧеков.КоличествоЧеков_Возврат, 0) / КоличествоЧеков.КоличествоДнейРаботыКассы
	КОНЕЦ КАК КоличествоЧеков_Возврат,
	ВЫБОР
		КОГДА ЕСТЬNULL(КоличествоЧеков.КоличествоЧеков_ПродажаВсего, 0) = 0
			ТОГДА 0
		ИНАЧЕ ЕСТЬNULL(ТаблицаПродажаОплата.СуммаПродажаВсего, 0) / КоличествоЧеков.КоличествоЧеков_ПродажаВсего
	КОНЕЦ КАК ПродажаОплата_СуммаПродажаВсего,
	ВЫБОР
		КОГДА ЕСТЬNULL(КоличествоЧеков.КоличествоЧеков_Продажа, 0) = 0
			ТОГДА 0
		ИНАЧЕ ЕСТЬNULL(ТаблицаПродажаОплата.СуммаПродажаБезСкидки, 0) / КоличествоЧеков.КоличествоЧеков_Продажа
	КОНЕЦ КАК ПродажаОплата_СуммаПродажа,
	ВЫБОР
		КОГДА ЕСТЬNULL(КоличествоЧеков.КоличествоЧеков_ПродажаСоСкидкой, 0) = 0
			ТОГДА 0
		ИНАЧЕ ЕСТЬNULL(ТаблицаПродажаОплата.СуммаПродажаСоСкидкой, 0) / КоличествоЧеков.КоличествоЧеков_ПродажаСоСкидкой
	КОНЕЦ КАК ПродажаОплата_СуммаПродажаСоСкидкой,
	ВЫБОР
		КОГДА ЕСТЬNULL(КоличествоЧеков.КоличествоЧеков_Возврат, 0) = 0
			ТОГДА 0
		ИНАЧЕ ЕСТЬNULL(ТаблицаПродажаОплата.СуммаВозвратВсего, 0) / КоличествоЧеков.КоличествоЧеков_Возврат
	КОНЕЦ КАК ПродажаОплата_СуммаВозврат,
	ВЫБОР
		КОГДА ЕСТЬNULL(КоличествоЧеков.КоличествоЧеков_ПродажаВсего, 0) = 0
			ТОГДА 0
		ИНАЧЕ (ЕСТЬNULL(ТаблицаПродажаОплата.КолПродажаНоменклатураБезСкидки, 0) + ЕСТЬNULL(ТаблицаПродажаОплата.КолПродажаНоменклатураСоСкидкой, 0)) / КоличествоЧеков.КоличествоЧеков_ПродажаВсего
	КОНЕЦ КАК ПродажаОплата_НоменклатураПродажаВсего,
	ВЫБОР
		КОГДА ЕСТЬNULL(КоличествоЧеков.КоличествоЧеков_Продажа, 0) = 0
			ТОГДА 0
		ИНАЧЕ ЕСТЬNULL(ТаблицаПродажаОплата.КолПродажаНоменклатураБезСкидки, 0) / КоличествоЧеков.КоличествоЧеков_Продажа
	КОНЕЦ КАК ПродажаОплата_НоменклатураПродажа,
	ВЫБОР
		КОГДА ЕСТЬNULL(КоличествоЧеков.КоличествоЧеков_ПродажаСоСкидкой, 0) = 0
			ТОГДА 0
		ИНАЧЕ ЕСТЬNULL(ТаблицаПродажаОплата.КолПродажаНоменклатураСоСкидкой, 0) / КоличествоЧеков.КоличествоЧеков_ПродажаСоСкидкой
	КОНЕЦ КАК ПродажаОплата_НоменклатураПродажаСоСкидкой,
	ВЫБОР
		КОГДА ЕСТЬNULL(КоличествоЧеков.КоличествоЧеков_Возврат, 0) = 0
			ТОГДА 0
		ИНАЧЕ ЕСТЬNULL(ТаблицаПродажаОплата.КолВозвратНоменклатура, 0) / КоличествоЧеков.КоличествоЧеков_Возврат
	КОНЕЦ КАК ПродажаОплата_НоменклатураВозврат,
	ВЫБОР
		КОГДА ЕСТЬNULL(КоличествоЧеков.КоличествоДнейРаботыКассы, 0) = 0
			ТОГДА 0
		ИНАЧЕ ЕСТЬNULL(ТаблицаПродажаОплата.ОплатаНаличные, 0) / КоличествоЧеков.КоличествоДнейРаботыКассы
	КОНЕЦ КАК Оплата_Наличные,
	ВЫБОР
		КОГДА ЕСТЬNULL(КоличествоЧеков.КоличествоДнейРаботыКассы, 0) = 0
			ТОГДА 0
		ИНАЧЕ ЕСТЬNULL(ТаблицаПродажаОплата.ОплатаПодарочныйСертификат, 0) / КоличествоЧеков.КоличествоДнейРаботыКассы
	КОНЕЦ КАК Оплата_ПодарочныйСертификат,
	ВЫБОР
		КОГДА ЕСТЬNULL(КоличествоЧеков.КоличествоДнейРаботыКассы, 0) = 0
			ТОГДА 0
		ИНАЧЕ ЕСТЬNULL(ТаблицаПродажаОплата.ОплатаБанковскаяКарта, 0) / КоличествоЧеков.КоличествоДнейРаботыКассы
	КОНЕЦ КАК Оплата_БанковскаяКарта,
	ВЫБОР
		КОГДА ЕСТЬNULL(КоличествоЧеков.КоличествоДнейРаботыКассы, 0) = 0
			ТОГДА 0
		ИНАЧЕ ЕСТЬNULL(ТаблицаПродажаОплата.ОплатаБанковскийКредит, 0) / КоличествоЧеков.КоличествоДнейРаботыКассы
	КОНЕЦ КАК Оплата_БанковскийКредит,
	ВЫБОР
		КОГДА ЕСТЬNULL(КоличествоЧеков.КоличествоДнейРаботыКассы, 0) = 0
			ТОГДА 0
		ИНАЧЕ ЕСТЬNULL(ТаблицаПродажаОплата.ОплатаСБП, 0) / КоличествоЧеков.КоличествоДнейРаботыКассы
	КОНЕЦ КАК Оплата_СБП,
	ВЫБОР
		КОГДА ЕСТЬNULL(КоличествоЧеков.КоличествоДнейРаботыКассы, 0) = 0
			ТОГДА 0
		ИНАЧЕ ЕСТЬNULL(ТаблицаПродажаОплата.ОплатаНСПК, 0) / КоличествоЧеков.КоличествоДнейРаботыКассы
	КОНЕЦ КАК Оплата_НСПК
{ВЫБРАТЬ
	КассаККМ.*,
	КоличествоЧеков_ПродажаВсего,
	КоличествоЧеков_Продажа,
	КоличествоЧеков_ПродажаСоСкидкой,
	КоличествоЧеков_Возврат,
	ПродажаОплата_СуммаПродажаВсего,
	ПродажаОплата_СуммаПродажа,
	ПродажаОплата_СуммаПродажаСоСкидкой,
	ПродажаОплата_СуммаВозврат,
	ПродажаОплата_НоменклатураПродажаВсего,
	ПродажаОплата_НоменклатураПродажа,
	ПродажаОплата_НоменклатураПродажаСоСкидкой,
	ПродажаОплата_НоменклатураВозврат,
	Оплата_Наличные,
	Оплата_ПодарочныйСертификат,
	Оплата_БанковскаяКарта,
	Оплата_БанковскийКредит,
	Оплата_СБП,
	Оплата_НСПК}
ИЗ
	КоличествоЧеков КАК КоличествоЧеков
		ЛЕВОЕ СОЕДИНЕНИЕ ТаблицаПродажаОплата КАК ТаблицаПродажаОплата
		ПО КоличествоЧеков.КассаККМ = ТаблицаПродажаОплата.КассаККМ
{ГДЕ
	(ВЫБОР
			КОГДА ЕСТЬNULL(КоличествоЧеков.КоличествоДнейРаботыКассы, 0) = 0
				ТОГДА 0
			ИНАЧЕ ЕСТЬNULL(КоличествоЧеков.КоличествоЧеков_ПродажаВсего, 0) / КоличествоЧеков.КоличествоДнейРаботыКассы
		КОНЕЦ) КАК КоличествоЧеков_ПродажаВсего,
	(ВЫБОР
			КОГДА ЕСТЬNULL(КоличествоЧеков.КоличествоДнейРаботыКассы, 0) = 0
				ТОГДА 0
			ИНАЧЕ ЕСТЬNULL(КоличествоЧеков.КоличествоЧеков_Продажа, 0) / КоличествоЧеков.КоличествоДнейРаботыКассы
		КОНЕЦ) КАК КоличествоЧеков_Продажа,
	(ВЫБОР
			КОГДА ЕСТЬNULL(КоличествоЧеков.КоличествоДнейРаботыКассы, 0) = 0
				ТОГДА 0
			ИНАЧЕ ЕСТЬNULL(КоличествоЧеков.КоличествоЧеков_ПродажаСоСкидкой, 0) / КоличествоЧеков.КоличествоДнейРаботыКассы
		КОНЕЦ) КАК КоличествоЧеков_ПродажаСоСкидкой,
	(ВЫБОР
			КОГДА ЕСТЬNULL(КоличествоЧеков.КоличествоДнейРаботыКассы, 0) = 0
				ТОГДА 0
			ИНАЧЕ ЕСТЬNULL(КоличествоЧеков.КоличествоЧеков_Возврат, 0) / КоличествоЧеков.КоличествоДнейРаботыКассы
		КОНЕЦ) КАК КоличествоЧеков_Возврат,
	КоличествоЧеков.КассаККМ.*}</query>
	</dataSet>
	<totalField>
		<dataPath>КоличествоЧеков_Возврат</dataPath>
		<expression>Среднее(КоличествоЧеков_Возврат)</expression>
	</totalField>
	<totalField>
		<dataPath>КоличествоЧеков_Продажа</dataPath>
		<expression>Среднее(КоличествоЧеков_Продажа)</expression>
	</totalField>
	<totalField>
		<dataPath>КоличествоЧеков_ПродажаВсего</dataPath>
		<expression>Среднее(КоличествоЧеков_ПродажаВсего)</expression>
	</totalField>
	<totalField>
		<dataPath>КоличествоЧеков_ПродажаСоСкидкой</dataPath>
		<expression>Среднее(КоличествоЧеков_ПродажаСоСкидкой)</expression>
	</totalField>
	<totalField>
		<dataPath>Оплата_БанковскаяКарта</dataPath>
		<expression>Среднее(Оплата_БанковскаяКарта)</expression>
	</totalField>
	<totalField>
		<dataPath>Оплата_БанковскийКредит</dataPath>
		<expression>Среднее(Оплата_БанковскийКредит)</expression>
	</totalField>
	<totalField>
		<dataPath>Оплата_Наличные</dataPath>
		<expression>Среднее(Оплата_Наличные)</expression>
	</totalField>
	<totalField>
		<dataPath>Оплата_НСПК</dataPath>
		<expression>Среднее(Оплата_НСПК)</expression>
	</totalField>
	<totalField>
		<dataPath>Оплата_ПодарочныйСертификат</dataPath>
		<expression>Среднее(Оплата_ПодарочныйСертификат)</expression>
	</totalField>
	<totalField>
		<dataPath>Оплата_СБП</dataPath>
		<expression>Среднее(Оплата_СБП)</expression>
	</totalField>
	<totalField>
		<dataPath>ПродажаОплата_НоменклатураВозврат</dataPath>
		<expression>Среднее(ПродажаОплата_НоменклатураВозврат)</expression>
	</totalField>
	<totalField>
		<dataPath>ПродажаОплата_НоменклатураПродажа</dataPath>
		<expression>Среднее(ПродажаОплата_НоменклатураПродажа)</expression>
	</totalField>
	<totalField>
		<dataPath>ПродажаОплата_НоменклатураПродажаВсего</dataPath>
		<expression>Среднее(ПродажаОплата_НоменклатураПродажаВсего)</expression>
	</totalField>
	<totalField>
		<dataPath>ПродажаОплата_НоменклатураПродажаСоСкидкой</dataPath>
		<expression>Среднее(ПродажаОплата_НоменклатураПродажаСоСкидкой)</expression>
	</totalField>
	<totalField>
		<dataPath>ПродажаОплата_СуммаВозврат</dataPath>
		<expression>Среднее(ПродажаОплата_СуммаВозврат)</expression>
	</totalField>
	<totalField>
		<dataPath>ПродажаОплата_СуммаПродажа</dataPath>
		<expression>Среднее(ПродажаОплата_СуммаПродажа)</expression>
	</totalField>
	<totalField>
		<dataPath>ПродажаОплата_СуммаПродажаВсего</dataPath>
		<expression>Среднее(ПродажаОплата_СуммаПродажаВсего)</expression>
	</totalField>
	<totalField>
		<dataPath>ПродажаОплата_СуммаПродажаСоСкидкой</dataPath>
		<expression>Среднее(ПродажаОплата_СуммаПродажаСоСкидкой)</expression>
	</totalField>
	<parameter>
		<name>Период</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Период</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>v8:StandardPeriod</v8:Type>
		</valueType>
		<value xsi:type="v8:StandardPeriod">
			<v8:variant xsi:type="v8:StandardPeriodVariant">Custom</v8:variant>
			<v8:startDate>0001-01-01T00:00:00</v8:startDate>
			<v8:endDate>0001-01-01T00:00:00</v8:endDate>
		</value>
		<useRestriction>false</useRestriction>
		<availableAsField>false</availableAsField>
		<denyIncompleteValues>true</denyIncompleteValues>
		<use>Always</use>
	</parameter>
	<parameter>
		<name>КонецПериода</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Конец периода</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>true</useRestriction>
		<expression>&amp;Период.ДатаОкончания</expression>
		<availableAsField>false</availableAsField>
	</parameter>
	<parameter>
		<name>НачалоПериода</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Начало периода</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>true</useRestriction>
		<expression>&amp;Период.ДатаНачала</expression>
		<availableAsField>false</availableAsField>
	</parameter>
	<settingsVariant>
		<dcsset:name>СтатистикаЧековККМ</dcsset:name>
		<dcsset:presentation xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Статистика чеков</v8:content>
			</v8:item>
		</dcsset:presentation>
		<dcsset:settings xmlns:style="http://v8.1c.ru/8.1/data/ui/style" xmlns:sys="http://v8.1c.ru/8.1/data/ui/fonts/system" xmlns:web="http://v8.1c.ru/8.1/data/ui/colors/web" xmlns:win="http://v8.1c.ru/8.1/data/ui/colors/windows">
			<dcsset:selection>
				<dcsset:item xsi:type="dcsset:SelectedItemFolder">
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Среднее кол-во чеков по кассе</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>КоличествоЧеков_ПродажаВсего</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>КоличествоЧеков_Продажа</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>КоличествоЧеков_ПродажаСоСкидкой</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>КоличествоЧеков_Возврат</dcsset:field>
					</dcsset:item>
					<dcsset:placement>Auto</dcsset:placement>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemFolder">
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Средняя сумма чека</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>ПродажаОплата_СуммаПродажаВсего</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>ПродажаОплата_СуммаПродажа</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>ПродажаОплата_СуммаПродажаСоСкидкой</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>ПродажаОплата_СуммаВозврат</dcsset:field>
					</dcsset:item>
					<dcsset:placement>Auto</dcsset:placement>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemFolder">
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Среднее кол-во товаров в чеке</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>ПродажаОплата_НоменклатураПродажаВсего</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>ПродажаОплата_НоменклатураПродажа</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>ПродажаОплата_НоменклатураПродажаСоСкидкой</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>ПродажаОплата_НоменклатураВозврат</dcsset:field>
					</dcsset:item>
					<dcsset:placement>Auto</dcsset:placement>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemFolder">
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Средняя сумма по кассе по виду оплаты</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>Оплата_Наличные</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>Оплата_БанковскаяКарта</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>Оплата_ПодарочныйСертификат</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>Оплата_БанковскийКредит</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>Оплата_СБП</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>Оплата_НСПК</dcsset:field>
					</dcsset:item>
					<dcsset:placement>Auto</dcsset:placement>
				</dcsset:item>
			</dcsset:selection>
			<dcsset:filter>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">КассаККМ</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:right xsi:type="dcscor:DesignTimeValue">Справочник.КассыККМ.ПустаяСсылка</dcsset:right>
					<dcsset:userSettingID>198bb455-e45e-4b98-b83f-778c35a1d6da</dcsset:userSettingID>
					<dcsset:userSettingPresentation xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Касса ККМ</v8:content>
						</v8:item>
					</dcsset:userSettingPresentation>
				</dcsset:item>
			</dcsset:filter>
			<dcsset:dataParameters>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Период</dcscor:parameter>
					<dcscor:value xsi:type="v8:StandardPeriod">
						<v8:variant xsi:type="v8:StandardPeriodVariant">ThisMonth</v8:variant>
					</dcscor:value>
					<dcsset:userSettingID>c865b56b-edd3-4317-9c86-5ece2e21b876</dcsset:userSettingID>
					<dcsset:userSettingPresentation xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Период</v8:content>
						</v8:item>
					</dcsset:userSettingPresentation>
				</dcscor:item>
			</dcsset:dataParameters>
			<dcsset:outputParameters>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>МакетОформления</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ОформлениеОтчетовБежевый</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ВыводитьЗаголовок</dcscor:parameter>
					<dcscor:value xsi:type="dcsset:DataCompositionTextOutputType">DontOutput</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ВыводитьПараметрыДанных</dcscor:parameter>
					<dcscor:value xsi:type="dcsset:DataCompositionTextOutputType">DontOutput</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ВыводитьОтбор</dcscor:parameter>
					<dcscor:value xsi:type="dcsset:DataCompositionTextOutputType">DontOutput</dcscor:value>
				</dcscor:item>
			</dcsset:outputParameters>
			<dcsset:item xsi:type="dcsset:StructureItemGroup">
				<dcsset:groupItems>
					<dcsset:item xsi:type="dcsset:GroupItemField">
						<dcsset:field>КассаККМ</dcsset:field>
						<dcsset:groupType>Items</dcsset:groupType>
						<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
						<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
						<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
					</dcsset:item>
				</dcsset:groupItems>
				<dcsset:order>
					<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
				</dcsset:order>
				<dcsset:selection>
					<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
				</dcsset:selection>
			</dcsset:item>
		</dcsset:settings>
	</settingsVariant>
</DataCompositionSchema>